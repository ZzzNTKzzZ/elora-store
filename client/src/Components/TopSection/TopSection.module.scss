@use "../../Styles/variable" as *;
@use "../../Styles/mixins" as *;
@use "sass:math";

// ==== CONFIG ====
$radius: 50%;
$radius-image: 60px;
$start-angle: -90deg;
$end-angle: 90deg;
$count: 5;
$start-position: calc(-12.5% + #{$radius-image});

// ==== STYLES ====
.wrapper {
  // === HEADER ===
  .header {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    margin-bottom: 2rem;

    h1 {
      font-size: 2.5rem;
    }
  }

  // === LAYOUT ===
  .layout {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 500px;
    padding-right: 0.5rem;
    overflow: hidden;
  }

  // === SIDE PRODUCTS ===
  .sideProducts {
    position: relative;
    width: 50%;
    transform: translateX(-17%);

    .curve {
      position: absolute;
      top: 50%;
      left: $start-position;
      width: $radius;
      aspect-ratio: 1;
      border: 2px solid #fff;
      border-radius: 50%;
      transform: translateY(-50%);
      background-image: none;
    }

    .smallImages {
      position: relative;
      left: $start-position;
      width: $radius;
      aspect-ratio: 1;
    }

    .smallImage {
      position: absolute;
      z-index: 1;
      width: $radius-image;
      aspect-ratio: 1;
      border-radius: 50%;
      overflow: hidden;
      background-color: $accent-color;

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      // Arrange small images along the curve
      @for $i from 1 through $count {
        $angle: $start-angle + ($i - 1) * calc(($end-angle - $start-angle) / ($count - 1));

        &.locationImage_#{$i} {
          top: calc(50% + #{$radius} * sin($angle));
          left: calc(50% + #{$radius} * cos($angle));
          transform: translate(-50%, -50%);
        }
      }
    }
  }

  // === MAIN PRODUCT ===
  .mainProduct {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 500px;
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .imageProduct {
    position: relative;
    width: 500px;
    aspect-ratio: 1;
    border-radius: 50%;
    overflow: hidden;
  }

  .backgroundName {
    position: relative;
    top: 50%;
    left: 50%;
    width: 85%;
    aspect-ratio: 1;
    border-radius: 50%;
    overflow: hidden;
    transform: translate(-50%, -50%);
    transition: all 0.2s ease-in-out;

    .nameItem {
      position: absolute;
      top: 75%;
      left: 50%;
      transform: translateX(-50%);

      p {
        font-size: 1.75rem;
      }
    }
  }

  // === MAIN IMAGE ===
  img {
    position: absolute;
    top: 50%;
    left: 50%;
    z-index: 2;
    width: 85%;
    aspect-ratio: 1;
    border-radius: 50%;
    border: 2px solid $accent-color;
    object-fit: cover;
    transform: translate(-50%, -50%);
    transition: all 0.2s ease-in-out;
  }

  // === HOVER STATE ===
  .isHover {
    position: relative;

    img {
      transform: translate(-50%, -50%) scale(1.05);
      filter: brightness(1.1);
    }

    .backgroundName {
      z-index: 9;
      width: 89.25%;

      .nameItem {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 25%;
        z-index: 9;
        color: $primary-color;
        background-color: #fff;
      }
    }

    a {
      @include body-500;
    }
  }

  // === CURVE BORDER ===
  .curve {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    transform: translate(-50%, -50%);
    background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='50%25' ry='50%25' stroke='white' stroke-width='5' stroke-dasharray='24' stroke-dashoffset='0' stroke-linecap='round'/%3e%3c/svg%3e");

    &::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 50%;
      height: 102%;
      background-color: $primary-color;
      z-index: 1;
    }
  }
}

// === DESCRIPTION BUBBLES ===
.desProduct {
  .des {
    @include body-400;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    width: fit-content;
    max-width: 50%;
    aspect-ratio: 1;
    padding: 0.5rem;
    border-radius: 50%;
    border: 2px solid $accent-color;
    font-size: 18px;
    position: relative;
    cursor: default;
    animation: floatBubble 3.5s ease-in-out infinite;
    transition: background 0.3s ease-in-out, color 0.5s ease-in-out;

    // Stagger bubble float animation
    @for $i from 1 through 3 {
      &:nth-child(#{$i}) {
        animation-delay: ($i - 1) * 0.4s;
      }
    }

    &:nth-child(1) {
      left: 50%;
    }

    &:nth-child(3) {
      left: 25%;
    }

    &:hover {
      background-color: #fff;
      color: $primary-color;
    }
  }
}

// === ANIMATIONS ===
@keyframes floatBubble {
  0%, 100% {
    transform: translate(0, 0);
  }
  25% {
    transform: translate(3px, -4px);
  }
  50% {
    transform: translate(0, -8px);
  }
  75% {
    transform: translate(-3px, -4px);
  }
}

@keyframes dragDownDiagonal {
  0% {
    transform: translate(-100%, -100%);
  }
  100% {
    transform: translate(80%, 80%);
  }
}
